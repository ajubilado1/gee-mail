<!--Date: 07/28/2016
<!--Name: Artemio P Jubilado jr (AJ)
<!--Project Objective: project is an individuals inbox email account, a lot of online references
<!--were used in accomplishing this project.  -->


<!DOCTYPE html>
<html>
    <head>
        <script src="js/mail-generator.js"></script>
        <link href="css/style.css" rel="stylesheet" media="screen">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
		
       	<script id="emailTemplate" type="text/x-jquery-tmpl">
            <tr>
                <td class="date"> ${date} </td>
                <td class="sender"> ${sender} </td>
                <td class="subject"> ${subject} </td>
				<td class="body"> ${body} </td>
				
            </tr>
        </script>
	
		
    <script>
	
      window.onload = function(){
            $("document").ready(function(){
                window.geemails = [];
                loadGeeMails(); //function places data into window.geemails array
                console.log(window.geemails);
				updateInbox();

			$("#emailTemplate").tmpl(window.geemails).appendTo("#emailContainer");
			
			
				<!--6.  Set a recurring function to via the JavaScript setInterval function that will call our existing getNewMessage function that we have created for you that will return a newly created message with the same properties as your previous messages.-->
	
                setInterval(function(){
                    var myMessage = getNewMessage(); //function generates new message data
                    window.geemails.push(myMessage);
                    console.log(window.geemails);   
                  $("#emailTemplate").tmpl(window.geemails).appendTo("emailContainer");
				  updateInbox()
                },  5000);
				
	
				<!--5.  You must show an inbox count somewhere on the page to show the current number of messages in your inbox.-->
				
				function updateInbox() {
				var inboxCount = document.getElementById("inbox");
				inboxCount.innerHTML = "inbox: " + window.geemails.length;
				
				}
						
				<!--splash screen...greeting user on form load-->
				$.fn.center = function () {
						this.css("position","absolute");
						this.css("top", Math.max(0, (
						($(window).height() - $(this).outerHeight()) / 2) + 
						$(window).scrollTop()) + "px"
						);
						this.css("left", Math.max(0, (
						($(window).width() - $(this).outerWidth()) / 2) + 
						$(window).scrollLeft()) + "px"
						);
						return this;
						}

						$("#overlay").show();
						$("#overlay-content").show().center();

						setTimeout(function(){    
						$("#overlay").fadeOut();
						}, 5000);
	
					//toggles e-mail body message
					var elements = document.getElementsByClassName('sender'); 
					for(var i =0; i < elements.length; i++){
					var element = elements[i];
  
						element.addEventListener("click", handleClick);
						}

			
					function handleClick(){  
					var elements = document.getElementsByClassName('body');
						for(var i= 0; i < elements.length; i++){
							var element = elements[i];
							if(element.style.display === "none"){
							element.style.display = "block";
							}else{
							element.style.display = "none";
					}  
					}
				}			
                });
        };
	</script>	
	
   </head>
		<!--2.  Create a basic page layout via HTML/CSS with a top header section with the name of the application and a content section where you will display the messages.-->
		
		<!--When your page loads, via JavaScript access our prepopulated data stored in the window.geemails variable. Each object in the array has the following properties:

				date - The date message was sent
				subject - The subject of the message
				sender - The sender of the message
				body - The GeeMail message content-->

	<body>
		<div id = "wrapper1">
			<div id="header">
				<h1>Inbox</h1>	
			</div>
			
			<!--5.  You must show an inbox count somewhere on the page to show the current number of messages in your inbox.-->
			 <div id="inbox"></div>
			 
			
			<!--email table-->
			<div id="content">
				<div class="message">
					<table id="table" border="4" width="930"> 
						<tr bgcolor="#cccccc">
							<th class="date">Date</th><br>
							<th class="sender">Sender</th><br>
							<th class="subject">Subject</th><br>
							<div class="body">
								<th class="body">Message</th><br>
							</div>							
							<tbody id="emailContainer">		
							</tbody>
					</table>
				</div>
			</div>  	
	
			<!--splash screen text-->
			<div id="overlay">
				<div id="overlay-content">Welcome to your inbox...</div>
			</div>
			<br>
			<br>
			<br>
			<br>
		</div>
	</body>
</html>
  
 
